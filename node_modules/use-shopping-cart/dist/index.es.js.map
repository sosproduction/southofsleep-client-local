{"version":3,"file":"index.es.js","sources":["../../node_modules/react-storage-hooks/dist/common.js","../../node_modules/react-storage-hooks/dist/state.js","../../node_modules/react-storage-hooks/dist/reducer.js","../../node_modules/react-storage-hooks/dist/index.js","../src/util.js","../src/reducers.js","../src/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nfunction fromStorage(value) {\n    return value !== null ? JSON.parse(value) : null;\n}\nfunction readItem(storage, key) {\n    try {\n        var storedValue = storage.getItem(key);\n        return fromStorage(storedValue);\n    }\n    catch (e) {\n        return null;\n    }\n}\nfunction toStorage(value) {\n    return JSON.stringify(value);\n}\nfunction writeItem(storage, key, value) {\n    try {\n        if (value !== null) {\n            storage.setItem(key, toStorage(value));\n        }\n        else {\n            storage.removeItem(key);\n        }\n        return Promise.resolve();\n    }\n    catch (error) {\n        return Promise.reject(error);\n    }\n}\nfunction useInitialState(storage, key, defaultState) {\n    var defaultStateRef = react_1.useRef(defaultState);\n    return react_1.useMemo(function () { var _a; return (_a = readItem(storage, key)) !== null && _a !== void 0 ? _a : defaultStateRef.current; }, [\n        key,\n        storage,\n    ]);\n}\nexports.useInitialState = useInitialState;\nfunction useStorageWriter(storage, key, state) {\n    var _a = react_1.useState(undefined), writeError = _a[0], setWriteError = _a[1];\n    react_1.useEffect(function () {\n        writeItem(storage, key, state).catch(function (error) {\n            if (!error || !error.message || error.message !== (writeError === null || writeError === void 0 ? void 0 : writeError.message)) {\n                setWriteError(error);\n            }\n        });\n        if (writeError) {\n            return function () {\n                setWriteError(undefined);\n            };\n        }\n    }, [state, key, writeError, storage]);\n    return writeError;\n}\nexports.useStorageWriter = useStorageWriter;\nfunction useStorageListener(storage, key, defaultState, onChange) {\n    var defaultStateRef = react_1.useRef(defaultState);\n    var onChangeRef = react_1.useRef(onChange);\n    var firstRun = react_1.useRef(true);\n    react_1.useEffect(function () {\n        var _a;\n        if (firstRun.current) {\n            firstRun.current = false;\n            return;\n        }\n        onChangeRef.current((_a = readItem(storage, key)) !== null && _a !== void 0 ? _a : defaultStateRef.current);\n    }, [key, storage]);\n    react_1.useEffect(function () {\n        function onStorageChange(event) {\n            var _a;\n            if (event.key === key) {\n                onChangeRef.current((_a = fromStorage(event.newValue)) !== null && _a !== void 0 ? _a : defaultStateRef.current);\n            }\n        }\n        if (typeof window !== 'undefined') {\n            window.addEventListener('storage', onStorageChange);\n            return function () {\n                window.removeEventListener('storage', onStorageChange);\n            };\n        }\n    }, [key]);\n}\nexports.useStorageListener = useStorageListener;\n//# sourceMappingURL=common.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar common_1 = require(\"./common\");\nfunction useStorageState(storage, key, defaultState) {\n    if (defaultState === void 0) { defaultState = null; }\n    var _a = react_1.useState(common_1.useInitialState(storage, key, defaultState)), state = _a[0], setState = _a[1];\n    common_1.useStorageListener(storage, key, defaultState, setState);\n    var writeError = common_1.useStorageWriter(storage, key, state);\n    return [state, setState, writeError];\n}\nexports.default = useStorageState;\n//# sourceMappingURL=state.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar common_1 = require(\"./common\");\nvar FORCE_STATE_ACTION = '__FORCE_STATE_INTERNAL_API__';\nfunction isForceStateAction(action) {\n    return (typeof action === 'object' &&\n        action !== null &&\n        'type' in action &&\n        action.type === FORCE_STATE_ACTION);\n}\nfunction addForceStateActionToReducer(reducer) {\n    return function (state, action) {\n        if (isForceStateAction(action))\n            return action.payload;\n        return reducer(state, action);\n    };\n}\nfunction useStorageReducer(storage, key, reducer, defaultInitialArg, defaultInit) {\n    if (defaultInit === void 0) { defaultInit = function (x) { return x; }; }\n    var defaultState = defaultInit(defaultInitialArg);\n    var _a = react_1.useReducer(addForceStateActionToReducer(reducer), common_1.useInitialState(storage, key, defaultState)), state = _a[0], dispatch = _a[1];\n    common_1.useStorageListener(storage, key, defaultState, function (newValue) {\n        dispatch({ type: FORCE_STATE_ACTION, payload: newValue });\n    });\n    var writeError = common_1.useStorageWriter(storage, key, state);\n    return [state, dispatch, writeError];\n}\nexports.default = useStorageReducer;\n//# sourceMappingURL=reducer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar state_1 = require(\"./state\");\nexports.useStorageState = state_1.default;\nvar reducer_1 = require(\"./reducer\");\nexports.useStorageReducer = reducer_1.default;\n//# sourceMappingURL=index.js.map","import { useStorageReducer } from 'react-storage-hooks'\r\n\r\nexport const isClient = typeof window === 'object'\r\n\r\nexport const formatCurrencyString = ({\r\n  value,\r\n  currency,\r\n  language = isClient ? navigator.language : 'en-US'\r\n}) => {\r\n  value = parseInt(value)\r\n  const numberFormat = new Intl.NumberFormat(language, {\r\n    style: 'currency',\r\n    currency,\r\n    currencyDisplay: 'symbol'\r\n  })\r\n  const parts = numberFormat.formatToParts(value)\r\n  let zeroDecimalCurrency = true\r\n\r\n  for (const part of parts) {\r\n    if (part.type === 'decimal') {\r\n      zeroDecimalCurrency = false\r\n      break\r\n    }\r\n  }\r\n\r\n  value = zeroDecimalCurrency ? value : value / 100\r\n  return numberFormat.format(value.toFixed(2))\r\n}\r\n\r\nexport function useLocalStorageReducer(key, reducer, initialState) {\r\n  const dummyStorage = {\r\n    getItem() {\r\n      return null\r\n    },\r\n    setItem() {},\r\n    removeItem() {}\r\n  }\r\n  return useStorageReducer(\r\n    isClient ? window.localStorage : dummyStorage,\r\n    key,\r\n    reducer,\r\n    initialState\r\n  )\r\n}\r\n\r\nexport const getCheckoutData = {\r\n  stripe(cart) {\r\n    const lineItems = []\r\n    for (const sku in cart.cartDetails)\r\n      lineItems.push({ price: sku, quantity: cart.cartDetails[sku].quantity })\r\n\r\n    const options = {\r\n      mode: 'payment',\r\n      lineItems,\r\n      successUrl: cart.successUrl,\r\n      cancelUrl: cart.cancelUrl,\r\n      billingAddressCollection: cart.billingAddressCollection\r\n        ? 'required'\r\n        : 'auto',\r\n      submitType: 'auto'\r\n    }\r\n\r\n    if (cart.allowedCountries?.length) {\r\n      options.shippingAddressCollection = {\r\n        allowedCountries: cart.allowedCountries\r\n      }\r\n    }\r\n\r\n    return options\r\n  }\r\n}\r\n\r\nexport function checkoutHandler(cart, checkoutOptions) {\r\n  let serviceProperty = ''\r\n  if (cart.stripe) serviceProperty = 'stripe'\r\n\r\n  const needsCheckoutData = cart.mode === 'client-only'\r\n\r\n  return async function (parameters) {\r\n    if (!serviceProperty) {\r\n      throw new Error(\r\n        'No compatible API has been defined, your options are: Stripe'\r\n      )\r\n    }\r\n\r\n    if (!checkoutOptions.modes.includes(cart.mode)) {\r\n      throw new Error(\r\n        `Invalid checkout mode '${\r\n          cart.mode\r\n        }' was chosen. The valid modes are ${new Intl.ListFormat().format(\r\n          checkoutOptions.modes\r\n        )}.`\r\n      )\r\n    }\r\n\r\n    let options = { sessionId: parameters?.sessionId }\r\n    if (needsCheckoutData) options = getCheckoutData.stripe(cart)\r\n\r\n    const { error } = await checkoutOptions[serviceProperty](\r\n      await cart[serviceProperty],\r\n      options,\r\n      parameters\r\n    )\r\n    if (error) return error\r\n  }\r\n}\r\n","import { formatCurrencyString } from './util'\n\nexport const cartInitialState = {\n  lastClicked: '',\n  shouldDisplayCart: false,\n  stripe: null\n}\nexport function cartReducer(cart, action) {\n  switch (action.type) {\n    case 'store-last-clicked':\n      return {\n        ...cart,\n        lastClicked: action.sku\n      }\n\n    case 'cart-click':\n      return {\n        ...cart,\n        shouldDisplayCart: !cart.shouldDisplayCart\n      }\n\n    case 'cart-hover':\n      return {\n        ...cart,\n        shouldDisplayCart: true\n      }\n\n    case 'close-cart':\n      return {\n        ...cart,\n        shouldDisplayCart: false\n      }\n\n    case 'stripe-changed':\n      return {\n        ...cart,\n        stripe: action.stripe\n      }\n\n    default:\n      return cart\n  }\n}\n\nexport const cartValuesInitialState = {\n  cartDetails: {},\n  totalPrice: 0,\n  cartCount: 0\n}\nfunction Entry(productData, quantity, currency, language) {\n  return {\n    ...productData,\n    quantity,\n    get value() {\n      return this.price * this.quantity\n    },\n    get formattedValue() {\n      return formatCurrencyString({\n        value: this.value,\n        currency,\n        language\n      })\n    }\n  }\n}\nexport function cartValuesReducer(state, action) {\n  function createEntry(product, count) {\n    const entry = Entry(product, count, action.currency, action.language)\n\n    return {\n      cartDetails: {\n        ...state.cartDetails,\n        [product.sku]: entry\n      },\n      totalPrice: state.totalPrice + product.price * count,\n      cartCount: state.cartCount + count\n    }\n  }\n  function updateEntry(sku, count) {\n    const cartDetails = { ...state.cartDetails }\n    const entry = cartDetails[sku]\n    if (entry.quantity + count <= 0) return removeEntry(sku)\n\n    cartDetails[sku] = Entry(\n      entry,\n      entry.quantity + count,\n      action.currency,\n      action.language\n    )\n\n    return {\n      cartDetails,\n      totalPrice: state.totalPrice + entry.price * count,\n      cartCount: state.cartCount + count\n    }\n  }\n  function removeEntry(sku) {\n    const cartDetails = { ...state.cartDetails }\n    const totalPrice = state.totalPrice - cartDetails[sku].value\n    const cartCount = state.cartCount - cartDetails[sku].quantity\n    delete cartDetails[sku]\n\n    return { cartDetails, totalPrice, cartCount }\n  }\n  function updateQuantity(sku, quantity) {\n    const entry = state.cartDetails[sku]\n    return updateEntry(sku, quantity - entry.quantity)\n  }\n\n  switch (action.type) {\n    case 'add-item-to-cart':\n      if (action.count <= 0) break\n      if (action.product.sku in state.cartDetails)\n        return updateEntry(action.product.sku, action.count)\n      return createEntry(action.product, action.count)\n\n    case 'increment-item':\n      if (action.count <= 0) break\n      if (action.sku in state.cartDetails)\n        return updateEntry(action.sku, action.count)\n      break\n\n    case 'decrement-item':\n      if (action.count <= 0) break\n      if (action.sku in state.cartDetails)\n        return updateEntry(action.sku, -action.count)\n      break\n\n    case 'set-item-quantity':\n      if (action.count < 0) break\n      if (action.sku in state.cartDetails)\n        return updateQuantity(action.sku, action.quantity)\n      break\n\n    case 'remove-item-from-cart':\n      if (action.sku in state.cartDetails) return removeEntry(action.sku)\n      break\n\n    case 'clear-cart':\n      return cartValuesInitialState\n\n    default:\n      return state\n  }\n\n  console.warn('Invalid action arguments', action)\n  return state\n}\n","import React, {\r\n  createContext,\r\n  useContext,\r\n  useEffect,\r\n  useMemo,\r\n  useReducer\r\n} from 'react'\r\n\r\nimport {\r\n  checkoutHandler,\r\n  formatCurrencyString,\r\n  isClient,\r\n  useLocalStorageReducer\r\n} from './util'\r\nimport {\r\n  cartInitialState,\r\n  cartReducer,\r\n  cartValuesInitialState,\r\n  cartValuesReducer\r\n} from './reducers'\r\n\r\nexport { formatCurrencyString, isClient } from './util'\r\n\r\nexport const CartContext = createContext([\r\n  {\r\n    lastClicked: '',\r\n    shouldDisplayCart: false,\r\n    ...cartValuesInitialState\r\n  },\r\n  () => {}\r\n])\r\n\r\nexport const CartProvider = ({\r\n  children,\r\n  mode,\r\n  stripe,\r\n  successUrl,\r\n  cancelUrl,\r\n  currency,\r\n  language = isClient ? navigator.language : 'en-US',\r\n  billingAddressCollection = false,\r\n  allowedCountries = null\r\n}) => {\r\n  const [cart, cartDispatch] = useReducer(cartReducer, cartInitialState)\r\n\r\n  useEffect(() => {\r\n    cartDispatch({ type: 'stripe-changed', stripe })\r\n  }, [stripe])\r\n\r\n  const [cartValues, cartValuesDispatch] = useLocalStorageReducer(\r\n    'cart-values',\r\n    cartValuesReducer,\r\n    cartValuesInitialState\r\n  )\r\n\r\n  // combine dispatches and\r\n  // memoize context value to avoid causing re-renders\r\n  const contextValue = useMemo(\r\n    () => [\r\n      {\r\n        ...cart,\r\n        ...cartValues,\r\n        mode,\r\n        successUrl,\r\n        cancelUrl,\r\n        currency,\r\n        language,\r\n        billingAddressCollection,\r\n        allowedCountries\r\n      },\r\n      (action) => {\r\n        cartDispatch(action)\r\n        cartValuesDispatch({ ...action, currency, language })\r\n      }\r\n    ],\r\n    [\r\n      cart,\r\n      cartDispatch,\r\n      cartValues,\r\n      cartValuesDispatch,\r\n      mode,\r\n      successUrl,\r\n      cancelUrl,\r\n      currency,\r\n      language,\r\n      billingAddressCollection,\r\n      allowedCountries\r\n    ]\r\n  )\r\n\r\n  return (\r\n    <CartContext.Provider value={contextValue}>{children}</CartContext.Provider>\r\n  )\r\n}\r\n\r\nexport const useShoppingCart = () => {\r\n  const [cart, dispatch] = useContext(CartContext)\r\n\r\n  const {\r\n    lastClicked,\r\n    shouldDisplayCart,\r\n    cartCount,\r\n    cartDetails,\r\n    totalPrice,\r\n    currency,\r\n    language\r\n  } = cart\r\n\r\n  const addItem = (product, count = 1) =>\r\n    dispatch({ type: 'add-item-to-cart', product, count })\r\n  const removeItem = (sku) => dispatch({ type: 'remove-item-from-cart', sku })\r\n  const setItemQuantity = (sku, quantity) =>\r\n    dispatch({ type: 'set-item-quantity', sku, quantity })\r\n  const incrementItem = (sku, count = 1) =>\r\n    dispatch({ type: 'increment-item', sku, count })\r\n  const decrementItem = (sku, count = 1) =>\r\n    dispatch({ type: 'decrement-item', sku, count })\r\n  const clearCart = () => dispatch({ type: 'clear-cart' })\r\n\r\n  const storeLastClicked = (sku) =>\r\n    dispatch({ type: 'store-last-clicked', sku })\r\n  const handleCartClick = () => dispatch({ type: 'cart-click' })\r\n  const handleCartHover = () => dispatch({ type: 'cart-hover' })\r\n  const handleCloseCart = () => dispatch({ type: 'close-cart' })\r\n\r\n  const redirectToCheckout = checkoutHandler(cart, {\r\n    modes: ['client-only', 'checkout-session'],\r\n    stripe(stripe, options) {\r\n      return stripe.redirectToCheckout(options)\r\n    }\r\n  })\r\n\r\n  const checkoutSingleItem = checkoutHandler(cart, {\r\n    modes: ['client-only'],\r\n    stripe(stripe, options, { sku, quantity = 1 }) {\r\n      options.lineItems = [{ price: sku, quantity }]\r\n      return stripe.redirectToCheckout(options)\r\n    }\r\n  })\r\n\r\n  return {\r\n    cartDetails,\r\n    cartCount,\r\n    totalPrice,\r\n    get formattedTotalPrice() {\r\n      return formatCurrencyString({\r\n        value: totalPrice,\r\n        currency,\r\n        language\r\n      })\r\n    },\r\n\r\n    addItem,\r\n    removeItem,\r\n    setItemQuantity,\r\n    incrementItem,\r\n    decrementItem,\r\n    clearCart,\r\n\r\n    lastClicked,\r\n    storeLastClicked,\r\n    shouldDisplayCart,\r\n    handleCartClick,\r\n    handleCartHover,\r\n    handleCloseCart,\r\n\r\n    redirectToCheckout,\r\n    checkoutSingleItem\r\n  }\r\n}\r\n"],"names":["react_1","common_1","state_1","reducer_1","isClient","window","formatCurrencyString","value","currency","language","navigator","parseInt","numberFormat","Intl","NumberFormat","style","currencyDisplay","parts","formatToParts","zeroDecimalCurrency","part","type","format","toFixed","useLocalStorageReducer","key","reducer","initialState","dummyStorage","getItem","setItem","removeItem","useStorageReducer","localStorage","getCheckoutData","stripe","cart","lineItems","sku","cartDetails","push","price","quantity","options","mode","successUrl","cancelUrl","billingAddressCollection","submitType","allowedCountries","length","shippingAddressCollection","checkoutHandler","checkoutOptions","serviceProperty","needsCheckoutData","parameters","Error","modes","includes","ListFormat","sessionId","error","cartInitialState","lastClicked","shouldDisplayCart","cartReducer","action","cartValuesInitialState","totalPrice","cartCount","Entry","productData","formattedValue","cartValuesReducer","state","createEntry","product","count","entry","updateEntry","removeEntry","updateQuantity","console","warn","CartContext","createContext","CartProvider","children","cartDispatch","useReducer","useEffect","cartValues","cartValuesDispatch","contextValue","useMemo","React","useShoppingCart","dispatch","useContext","addItem","setItemQuantity","incrementItem","decrementItem","clearCart","storeLastClicked","handleCartClick","handleCartHover","handleCloseCart","redirectToCheckout","checkoutSingleItem","formattedTotalPrice"],"mappings":"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"}